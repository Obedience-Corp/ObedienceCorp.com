<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{.Page.Title}}</title>
    <meta name="description" content="{{.Page.Description}}" />
    <link rel="stylesheet" href="/static/css/styles.css" />
  </head>
  <body>
    <!-- Hover Zones (visible < 1800px) -->
    <div class="hover-zone hover-zone-left" aria-label="Hover to view bulletins"></div>
    <div class="hover-zone hover-zone-right" aria-label="Hover to view dispatches"></div>

    <!-- Left Bulletin Board (External Signals) -->
    <aside class="bulletin-board bulletin-left">
      {{range .Bulletins}}
      <a href="{{.URL}}" target="_blank" rel="noopener noreferrer" class="bulletin-card">
        <div class="bulletin-header">
          <span class="bulletin-source">{{.Source}}</span>
          <span class="bulletin-date">{{.Date}}</span>
        </div>
        <h4 class="bulletin-title">{{.Title}}</h4>
        <p class="bulletin-excerpt">{{.Excerpt}}</p>
      </a>
      {{end}}
    </aside>

    <!-- Right Dispatch Board (Internal Dispatches) -->
    <aside class="bulletin-board bulletin-right">
      {{range .Dispatches}}
      <div class="dispatch-card">
        <div class="dispatch-header">
          <span class="dispatch-status dispatch-status-{{.Status}}">{{.Status}}</span>
          <span class="dispatch-date">{{.Date}}</span>
        </div>
        <h4 class="dispatch-title">{{.Title}}</h4>
        <p class="dispatch-excerpt">{{.Excerpt}}</p>
      </div>
      {{end}}
    </aside>

    <!-- Drawer Overlays (visible < 1800px when opened) -->
    <div class="drawer-overlay drawer-overlay-left">
      <div class="drawer-scrim"></div>
      <div class="drawer-container drawer-container-left">
        <div class="drawer-header">
          <h2 class="drawer-title">Bulletins</h2>
          <button class="drawer-close drawer-close-left" aria-label="Close bulletins">[X]</button>
        </div>
        <div class="drawer-content">
          {{range .Bulletins}}
          <a href="{{.URL}}" target="_blank" rel="noopener noreferrer" class="bulletin-card">
            <div class="bulletin-header">
              <span class="bulletin-source">{{.Source}}</span>
              <span class="bulletin-date">{{.Date}}</span>
            </div>
            <h4 class="bulletin-title">{{.Title}}</h4>
            <p class="bulletin-excerpt">{{.Excerpt}}</p>
          </a>
          {{end}}
        </div>
      </div>
    </div>

    <div class="drawer-overlay drawer-overlay-right">
      <div class="drawer-scrim"></div>
      <div class="drawer-container drawer-container-right">
        <div class="drawer-header">
          <h2 class="drawer-title">Dispatches</h2>
          <button class="drawer-close drawer-close-right" aria-label="Close dispatches">[X]</button>
        </div>
        <div class="drawer-content">
          {{range .Dispatches}}
          <div class="dispatch-card">
            <div class="dispatch-header">
              <span class="dispatch-status dispatch-status-{{.Status}}">{{.Status}}</span>
              <span class="dispatch-date">{{.Date}}</span>
            </div>
            <h4 class="dispatch-title">{{.Title}}</h4>
            <p class="dispatch-excerpt">{{.Excerpt}}</p>
          </div>
          {{end}}
        </div>
      </div>
    </div>

    <!-- Navigation Bar -->
    <nav class="navbar">
      <div class="nav-brand">{{.Hero.Brand}}</div>

      <!-- Desktop Navigation Menu -->
      <div class="nav-menu">
        {{range .Navigation}}
        <a href="{{.Path}}" class="nav-item"{{if eq .Type "external"}} target="_blank" rel="noopener noreferrer"{{end}}>{{.Label}}</a>
        {{end}}
      </div>

      <!-- Hamburger Button (Mobile) -->
      <button class="hamburger" id="hamburger-toggle" aria-label="Toggle navigation menu">
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
      </button>

      <div class="nav-right">
        <button id="theme-toggle" class="theme-toggle" aria-label="Toggle theme">
          <span class="theme-icon-dark">◐</span>
          <span class="theme-icon-light" style="display: none;">◑</span>
        </button>
        <a href="mailto:{{.Hero.ContactEmail}}" class="nav-contact" title="{{.Hero.ContactEmail}}">&#9993;</a>
      </div>
    </nav>

    <!-- Mobile Navigation Drawer -->
    <div class="nav-drawer-overlay" id="nav-drawer">
      <div class="nav-drawer-scrim"></div>
      <div class="nav-drawer-container">
        <div class="nav-drawer-header">
          <span class="nav-drawer-title">Menu</span>
          <button class="nav-drawer-close" id="nav-drawer-close" aria-label="Close menu">[X]</button>
        </div>
        <div class="nav-drawer-content">
          {{range .Navigation}}
          <a href="{{.Path}}" class="nav-drawer-item"{{if eq .Type "external"}} target="_blank" rel="noopener noreferrer"{{end}}>{{.Label}}</a>
          {{end}}
        </div>
      </div>
    </div>

    <!-- Page Header -->
    <header class="page-header"
            data-tagline1="{{.Page.TaglineLine1}}"
            data-tagline2="{{.Page.TaglineLine2}}"
            data-animate="{{.Page.AnimateTagline}}">
      <h1 class="page-title">{{.Page.HeroTitle}}</h1>
      {{if .Page.Subtitle}}<div class="page-subtitle">{{.Page.Subtitle}}</div>{{end}}
      <div class="page-taglines">
        <span class="tagline-line" id="line1"></span>
        <span class="tagline-line" id="line2"></span>
      </div>
      <div class="page-mission">{{.Page.Mission}}</div>
    </header>

    <div class="container">
      <!-- Article Boxes -->
      {{range .Articles}}
      <div class="article-box{{if .HasModal}} clickable{{end}}" style="{{.Style}}"{{if .HasModal}} data-modal-id="{{.ID}}"{{end}}>
        <h3 class="article-title">{{.Title}}</h3>
        <div class="article-body">
          {{.Content}}
        </div>
      </div>
      {{end}}
    </div>

    <!-- Modal -->
    <div id="modal-overlay" class="modal-overlay">
      <div class="modal-container">
        <button class="modal-close" aria-label="Close modal">[X]</button>
        <div class="modal-header">
          <h2 class="modal-title" id="modal-title"></h2>
        </div>
        <div class="modal-content" id="modal-content">
          <!-- Content populated by JavaScript -->
          {{range .Articles}}
          {{if .HasModal}}
          <div class="modal-article-content" data-article-id="{{.ID}}" style="display: none;">
            {{.ModalContent}}
          </div>
          {{end}}
          {{end}}
        </div>
        <footer class="modal-footer">
          © <span class="modal-year"></span> {{.Site.Name}}
        </footer>
      </div>
    </div>

    <footer>© <span id="year"></span> {{.Site.Name}}</footer>

    <script src="/static/js/main.js"></script>
  </body>
</html>
